import{a as B}from"./chunk-7XPDMRMC.js";import{a as A,b as N,c as V,d as I,e as L,f as F,g as D,q as W}from"./chunk-DHWRSAE3.js";import{a as G}from"./chunk-R3RPSZJZ.js";import{b as k}from"./chunk-E25IYVGI.js";import{G as a,Ga as E,I as x,J as M,Ja as T,N as f,U as m,V as t,W as e,X as l,Y as P,Z as g,_ as S,ia as i,ja as _,ka as C,na as w,oa as h,pa as v,u as b,v as y,w as c,x as p}from"./chunk-X3WSSSVM.js";function U(r,o){r&1&&(c(),t(0,"svg",59),l(1,"path",60)(2,"path",61),e())}function j(r,o){r&1&&(c(),t(0,"svg",59),l(1,"path",62),e())}function H(r,o){r&1&&(c(),t(0,"svg",59),l(1,"path",60)(2,"path",61),e())}function O(r,o){r&1&&(c(),t(0,"svg",59),l(1,"path",62),e())}function q(r,o){r&1&&(c(),t(0,"svg",59),l(1,"path",60)(2,"path",61),e())}function R(r,o){r&1&&(c(),t(0,"svg",59),l(1,"path",62),e())}function Y(r,o){r&1&&(c(),t(0,"svg",63),l(1,"circle",64)(2,"path",65),e())}function J(r,o){r&1&&(c(),t(0,"svg",63),l(1,"circle",64)(2,"path",65),e())}function K(r,o){if(r&1&&(t(0,"div",66)(1,"div",7)(2,"div",8),c(),t(3,"svg",67),l(4,"path",29),e()(),p(),t(5,"div",11)(6,"p",68),i(7),e()()()()),r&2){let u=S();a(7),_(u.successMessage)}}function Q(r,o){if(r&1&&(t(0,"div",69)(1,"div",7)(2,"div",8),c(),t(3,"svg",70),l(4,"path",71),e()(),p(),t(5,"div",11)(6,"p",72),i(7),e()()()()),r&2){let u=S();a(7),_(u.errorMessage)}}function X(r,o){if(r&1){let u=P();t(0,"div",73)(1,"div",74)(2,"div",75)(3,"div",76),c(),t(4,"svg",77),l(5,"path",78),e()(),p(),t(6,"h3",79),i(7,"Delete Account"),e(),t(8,"div",80)(9,"p",41),i(10," Are you sure you want to delete your account? This action cannot be undone and will permanently remove all your data. "),e()(),t(11,"div",81)(12,"div",82)(13,"button",83),g("click",function(){b(u);let d=S();return y(d.showDeleteConfirmation=!1)}),i(14," Cancel "),e(),t(15,"button",84),g("click",function(){b(u);let d=S();return y(d.deleteAccount())}),i(16," Delete Account "),e()()()()()()}}var z=class r{constructor(o,u){this.authService=o;this.settingsService=u}currentUser=null;isSidebarOpen=!1;isChangingPassword=!1;isSavingNotifications=!1;successMessage="";errorMessage="";showDeleteConfirmation=!1;showCurrentPassword=!1;showNewPassword=!1;showConfirmPassword=!1;passwordForm={currentPassword:"",newPassword:"",confirmPassword:""};notificationSettings={emailNotifications:!0,smsNotifications:!0,courseUpdates:!0,scheduleChanges:!0};ngOnInit(){this.authService.currentUser$.subscribe(o=>{this.currentUser=o})}onSidebarToggle(o){this.isSidebarOpen=o}changePassword(){if(this.isChangingPassword=!0,this.successMessage="",this.errorMessage="",this.passwordForm.newPassword!==this.passwordForm.confirmPassword){this.errorMessage="New passwords do not match.",this.isChangingPassword=!1;return}let o=this.settingsService.validatePasswordStrength(this.passwordForm.newPassword);if(!o.isValid){this.errorMessage=o.errors[0],this.isChangingPassword=!1;return}let u={current_password:this.passwordForm.currentPassword,new_password:this.passwordForm.newPassword,confirm_password:this.passwordForm.confirmPassword};this.settingsService.changePassword(u).subscribe({next:n=>{this.isChangingPassword=!1,this.successMessage=n.message||"Password changed successfully!",this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},setTimeout(()=>{this.successMessage=""},3e3)},error:n=>{this.isChangingPassword=!1,this.errorMessage=n.error?.message||"Failed to change password. Please try again.",setTimeout(()=>{this.errorMessage=""},5e3)}})}saveNotificationSettings(){this.isSavingNotifications=!0,this.successMessage="",this.errorMessage="";let o={email_notifications:this.notificationSettings.emailNotifications,sms_notifications:this.notificationSettings.smsNotifications,course_updates:this.notificationSettings.courseUpdates,schedule_changes:this.notificationSettings.scheduleChanges};this.settingsService.updateNotificationSettings(o).subscribe({next:u=>{this.isSavingNotifications=!1,this.successMessage="Notification preferences saved successfully!",setTimeout(()=>{this.successMessage=""},3e3)},error:u=>{this.isSavingNotifications=!1,this.errorMessage=u.error?.message||"Failed to save notification preferences. Please try again.",setTimeout(()=>{this.errorMessage=""},5e3)}})}exportData(){this.successMessage="",this.errorMessage="",this.settingsService.exportUserData().subscribe({next:o=>{this.successMessage=o.message||"Data export initiated. You will receive an email with your data shortly.",setTimeout(()=>{this.successMessage=""},5e3)},error:o=>{this.errorMessage=o.error?.message||"Failed to initiate data export. Please try again.",setTimeout(()=>{this.errorMessage=""},5e3)}})}deleteAccount(){this.showDeleteConfirmation=!1,this.successMessage="",this.errorMessage="",this.settingsService.requestAccountDeletion().subscribe({next:o=>{this.successMessage=o.message||"Account deletion request submitted. You will receive a confirmation email.",setTimeout(()=>{this.successMessage=""},5e3)},error:o=>{this.errorMessage=o.error?.message||"Failed to submit deletion request. Please try again.",setTimeout(()=>{this.errorMessage=""},5e3)}})}static \u0275fac=function(u){return new(u||r)(x(k),x(B))};static \u0275cmp=M({type:r,selectors:[["app-account-settings"]],decls:151,vars:26,consts:[["pageTitle","Account Settings","pageSubtitle","Manage your account security, preferences, and notifications",3,"sidebarToggle","isSidebarOpen"],[1,"max-w-4xl","mx-auto","space-y-8"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-gray-200","p-8"],[1,"mb-6"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mt-3","bg-yellow-50","border","border-yellow-200","rounded-lg","p-3"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-yellow-400"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","text-yellow-800"],[1,"space-y-6",3,"ngSubmit"],[1,"space-y-4"],["for","currentPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["id","currentPassword","name","currentPassword","placeholder","Enter your current password",1,"w-full","px-4","py-3","pr-12","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center",3,"click"],["class","h-5 w-5 text-gray-400","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["for","newPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","newPassword","name","newPassword","placeholder","Enter your new password",1,"w-full","px-4","py-3","pr-12","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","type","ngModel"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","confirmPassword","name","confirmPassword","placeholder","Confirm your new password",1,"w-full","px-4","py-3","pr-12","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","type","ngModel"],[1,"bg-gray-50","rounded-xl","p-4"],[1,"text-sm","font-medium","text-gray-900","mb-3"],[1,"text-sm","text-gray-600","space-y-1"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4","mr-2","text-gray-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"flex","justify-end"],["type","submit",1,"px-6","py-3","bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","rounded-xl","transition-colors","font-medium","flex","items-center",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mt-3","bg-blue-50","border","border-blue-200","rounded-lg","p-3"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-blue-400"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"text-sm","text-blue-800"],[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","name","emailNotifications",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],["type","checkbox","name","smsNotifications",1,"sr-only","peer",3,"ngModelChange","ngModel"],["type","checkbox","name","courseUpdates",1,"sr-only","peer",3,"ngModelChange","ngModel"],["type","checkbox","name","scheduleChanges",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"flex","justify-end","pt-6","border-t","border-gray-200","mt-6"],[1,"px-6","py-3","bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","rounded-xl","transition-colors","font-medium","flex","items-center",3,"click","disabled"],[1,"flex","items-center","justify-between","p-4","border","border-gray-200","rounded-xl"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","text-gray-700","hover:bg-gray-50","transition-colors","font-medium",3,"click"],[1,"flex","items-center","justify-between","p-4","border","border-red-200","rounded-xl","bg-red-50"],[1,"text-sm","font-medium","text-red-900"],[1,"text-sm","text-red-600"],[1,"px-4","py-2","bg-red-600","hover:bg-red-700","text-white","rounded-lg","transition-colors","font-medium",3,"click"],["class","bg-green-50 border border-green-200 rounded-xl p-4",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-xl p-4",4,"ngIf"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",4,"ngIf"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-4"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],[1,"text-sm","font-medium","text-green-800"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-4"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-2xl","bg-white"],[1,"mt-3","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-lg","font-medium","text-gray-900","mt-4"],[1,"mt-2","px-7","py-3"],[1,"items-center","px-4","py-3"],[1,"flex","space-x-3"],[1,"px-4","py-2","bg-gray-300","text-gray-800","text-base","font-medium","rounded-lg","shadow-sm","hover:bg-gray-400","focus:outline-none","focus:ring-2","focus:ring-gray-300",3,"click"],[1,"px-4","py-2","bg-red-600","text-white","text-base","font-medium","rounded-lg","shadow-sm","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"]],template:function(u,n){u&1&&(t(0,"app-page-layout",0),g("sidebarToggle",function(s){return n.onSidebarToggle(s)}),t(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),i(5,"Security Settings"),e(),t(6,"p",5),i(7,"Manage your password and account security."),e(),t(8,"div",6)(9,"div",7)(10,"div",8),c(),t(11,"svg",9),l(12,"path",10),e()(),p(),t(13,"div",11)(14,"p",12)(15,"strong"),i(16,"Note:"),e(),i(17," Password change functionality is currently under development. Please contact an administrator if you need to change your password. "),e()()()()(),t(18,"form",13),g("ngSubmit",function(){return n.changePassword()}),t(19,"div",14)(20,"div")(21,"label",15),i(22," Current Password "),e(),t(23,"div",16)(24,"input",17),v("ngModelChange",function(s){return h(n.passwordForm.currentPassword,s)||(n.passwordForm.currentPassword=s),s}),e(),t(25,"button",18),g("click",function(){return n.showCurrentPassword=!n.showCurrentPassword}),f(26,U,3,0,"svg",19)(27,j,2,0,"svg",19),e()()(),t(28,"div")(29,"label",20),i(30," New Password "),e(),t(31,"div",16)(32,"input",21),v("ngModelChange",function(s){return h(n.passwordForm.newPassword,s)||(n.passwordForm.newPassword=s),s}),e(),t(33,"button",18),g("click",function(){return n.showNewPassword=!n.showNewPassword}),f(34,H,3,0,"svg",19)(35,O,2,0,"svg",19),e()()(),t(36,"div")(37,"label",22),i(38," Confirm New Password "),e(),t(39,"div",16)(40,"input",23),v("ngModelChange",function(s){return h(n.passwordForm.confirmPassword,s)||(n.passwordForm.confirmPassword=s),s}),e(),t(41,"button",18),g("click",function(){return n.showConfirmPassword=!n.showConfirmPassword}),f(42,q,3,0,"svg",19)(43,R,2,0,"svg",19),e()()()(),t(44,"div",24)(45,"h4",25),i(46,"Password Requirements"),e(),t(47,"ul",26)(48,"li",27),c(),t(49,"svg",28),l(50,"path",29),e(),i(51," At least 8 characters long "),e(),p(),t(52,"li",27),c(),t(53,"svg",28),l(54,"path",29),e(),i(55," Contains uppercase and lowercase letters "),e(),p(),t(56,"li",27),c(),t(57,"svg",28),l(58,"path",29),e(),i(59," Contains at least one number "),e(),p(),t(60,"li",27),c(),t(61,"svg",28),l(62,"path",29),e(),i(63," Contains at least one special character "),e()()(),p(),t(64,"div",30)(65,"button",31),f(66,Y,3,0,"svg",32),i(67),e()()()(),t(68,"div",2)(69,"div",3)(70,"h3",4),i(71,"Notification Preferences"),e(),t(72,"p",5),i(73,"Choose how you want to be notified about important updates."),e(),t(74,"div",33)(75,"div",7)(76,"div",8),c(),t(77,"svg",34),l(78,"path",35),e()(),p(),t(79,"div",11)(80,"p",36)(81,"strong"),i(82,"Note:"),e(),i(83," Notification preferences are currently saved locally. Full notification system is under development. "),e()()()()(),t(84,"div",37)(85,"div",38)(86,"div",39)(87,"h4",40),i(88,"Email Notifications"),e(),t(89,"p",41),i(90,"Receive notifications via email about course updates and announcements"),e()(),t(91,"label",42)(92,"input",43),v("ngModelChange",function(s){return h(n.notificationSettings.emailNotifications,s)||(n.notificationSettings.emailNotifications=s),s}),e(),l(93,"div",44),e()(),t(94,"div",38)(95,"div",39)(96,"h4",40),i(97,"SMS Notifications"),e(),t(98,"p",41),i(99,"Receive important updates via SMS on your registered phone number"),e()(),t(100,"label",42)(101,"input",45),v("ngModelChange",function(s){return h(n.notificationSettings.smsNotifications,s)||(n.notificationSettings.smsNotifications=s),s}),e(),l(102,"div",44),e()(),t(103,"div",38)(104,"div",39)(105,"h4",40),i(106,"Course Updates"),e(),t(107,"p",41),i(108,"Get notified when new materials or recordings are added to your courses"),e()(),t(109,"label",42)(110,"input",46),v("ngModelChange",function(s){return h(n.notificationSettings.courseUpdates,s)||(n.notificationSettings.courseUpdates=s),s}),e(),l(111,"div",44),e()(),t(112,"div",38)(113,"div",39)(114,"h4",40),i(115,"Schedule Changes"),e(),t(116,"p",41),i(117,"Be notified about timetable changes and class cancellations"),e()(),t(118,"label",42)(119,"input",47),v("ngModelChange",function(s){return h(n.notificationSettings.scheduleChanges,s)||(n.notificationSettings.scheduleChanges=s),s}),e(),l(120,"div",44),e()()(),t(121,"div",48)(122,"button",49),g("click",function(){return n.saveNotificationSettings()}),f(123,J,3,0,"svg",32),i(124),e()()(),t(125,"div",2)(126,"div",3)(127,"h3",4),i(128,"Account Actions"),e(),t(129,"p",5),i(130,"Manage your account and data."),e()(),t(131,"div",14)(132,"div",50)(133,"div",39)(134,"h4",40),i(135,"Export Account Data"),e(),t(136,"p",41),i(137,"Download a copy of your account data and course information"),e()(),t(138,"button",51),g("click",function(){return n.exportData()}),i(139," Export "),e()(),t(140,"div",52)(141,"div",39)(142,"h4",53),i(143,"Delete Account"),e(),t(144,"p",54),i(145,"Permanently delete your account and all associated data"),e()(),t(146,"button",55),g("click",function(){return n.showDeleteConfirmation=!0}),i(147," Delete "),e()()()(),f(148,K,8,1,"div",56)(149,Q,8,1,"div",57),e(),f(150,X,17,0,"div",58),e()),u&2&&(m("isSidebarOpen",n.isSidebarOpen),a(24),m("type",n.showCurrentPassword?"text":"password"),w("ngModel",n.passwordForm.currentPassword),a(2),m("ngIf",!n.showCurrentPassword),a(),m("ngIf",n.showCurrentPassword),a(5),m("type",n.showNewPassword?"text":"password"),w("ngModel",n.passwordForm.newPassword),a(2),m("ngIf",!n.showNewPassword),a(),m("ngIf",n.showNewPassword),a(5),m("type",n.showConfirmPassword?"text":"password"),w("ngModel",n.passwordForm.confirmPassword),a(2),m("ngIf",!n.showConfirmPassword),a(),m("ngIf",n.showConfirmPassword),a(22),m("disabled",n.isChangingPassword),a(),m("ngIf",n.isChangingPassword),a(),C(" ",n.isChangingPassword?"Changing...":"Change Password"," "),a(25),w("ngModel",n.notificationSettings.emailNotifications),a(9),w("ngModel",n.notificationSettings.smsNotifications),a(9),w("ngModel",n.notificationSettings.courseUpdates),a(9),w("ngModel",n.notificationSettings.scheduleChanges),a(3),m("disabled",n.isSavingNotifications),a(),m("ngIf",n.isSavingNotifications),a(),C(" ",n.isSavingNotifications?"Saving...":"Save Preferences"," "),a(24),m("ngIf",n.successMessage),a(),m("ngIf",n.errorMessage),a(),m("ngIf",n.showDeleteConfirmation))},dependencies:[T,E,W,D,N,A,V,I,F,L,G],encapsulation:2})};export{z as AccountSettingsComponent};
