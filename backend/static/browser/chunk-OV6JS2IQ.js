import{a as I}from"./chunk-R3RPSZJZ.js";import{b as D}from"./chunk-E25IYVGI.js";import{Ba as w,Fa as M,G as o,Ga as k,I as _,J as y,Ja as T,N as x,Sa as R,U as p,V as e,W as t,Wa as A,X as l,Y as C,Z as f,_ as c,ha as E,ia as i,ja as g,ka as v,u as h,v as b,w as d,x as s}from"./chunk-X3WSSSVM.js";function V(a,r){a&1&&(e(0,"div",40)(1,"div",41),d(),e(2,"svg",42),l(3,"path",43),t()(),s(),e(4,"h3",44),i(5,"No pending registrations"),t(),e(6,"p",45),i(7,"All student registration requests have been processed. New requests will appear here when submitted."),t()())}function L(a,r){if(a&1&&(e(0,"div",78)(1,"div",79),d(),e(2,"svg",58),l(3,"path",80),t(),s(),e(4,"span",16),i(5,"Class:"),t()(),e(6,"span",81),i(7),t()()),a&2){let n=c().$implicit;o(7),v(" ",n.class_display_name," ")}}function H(a,r){if(a&1){let n=C();e(0,"div",48)(1,"div",49)(2,"div",26)(3,"div",50)(4,"div",51),d(),e(5,"svg",52),l(6,"path",53),t()(),s(),e(7,"div")(8,"h4",54),i(9),t(),e(10,"p",55),i(11),t()()(),e(12,"div",56)(13,"div",57)(14,"div",14),d(),e(15,"svg",58),l(16,"path",59),t(),s(),e(17,"span",16),i(18,"Registration Number:"),t()(),e(19,"p",60),i(20),t()(),e(21,"div",57)(22,"div",14),d(),e(23,"svg",58),l(24,"path",61),t(),s(),e(25,"span",16),i(26,"Phone:"),t()(),e(27,"p",60),i(28),t()()(),x(29,L,8,1,"div",62),e(30,"div",63),d(),e(31,"svg",64),l(32,"path",65),t(),s(),e(33,"span"),i(34),t()()()(),e(35,"div",66)(36,"div",67),d(),e(37,"svg",68),l(38,"path",69),t(),s(),e(39,"span",70),i(40,"Manual Verification"),t()(),e(41,"p",71),i(42," This student will be manually verified during in-person meetings. SMS verification is temporarily disabled until Twilio account is configured. "),t()(),e(43,"div",72)(44,"button",73),f("click",function(){let u=h(n).$implicit,S=c(3);return b(S.approveRegistration(u.id))}),d(),e(45,"svg",74),l(46,"path",75),t(),s(),e(47,"span"),i(48,"Approve Registration"),t()(),e(49,"button",76),f("click",function(){let u=h(n).$implicit,S=c(3);return b(S.rejectRegistration(u.id))}),d(),e(50,"svg",74),l(51,"path",77),t(),s(),e(52,"span"),i(53,"Reject Registration"),t()()()()}if(a&2){let n=r.$implicit,m=c(3);o(9),g(n.full_name),o(2),g(n.email),o(9),g(n.registration_number),o(8),g(n.phone_number),o(),p("ngIf",n.class_display_name),o(5),v("Registered: ",n.date_joined_formatted||m.formatDate(n.date_joined))}}function G(a,r){if(a&1&&(e(0,"div",46),x(1,H,54,6,"div",47),t()),a&2){let n=c(2);o(),p("ngForOf",n.pendingRegistrations)}}function z(a,r){if(a&1&&(e(0,"div"),x(1,V,8,0,"div",38)(2,G,2,1,"div",39),t()),a&2){let n=c();o(),p("ngIf",n.pendingRegistrations.length===0),o(),p("ngIf",n.pendingRegistrations.length>0)}}function P(a,r){a&1&&(e(0,"div",40)(1,"div",41),d(),e(2,"svg",42),l(3,"path",83),t()(),s(),e(4,"h3",44),i(5,"No confirmed students"),t(),e(6,"p",45),i(7,"Approved students will appear here once they have been confirmed."),t()())}function O(a,r){if(a&1&&(e(0,"div",78)(1,"div",79),d(),e(2,"svg",58),l(3,"path",80),t(),s(),e(4,"span",16),i(5,"Class:"),t()(),e(6,"span",81),i(7),t()()),a&2){let n=c().$implicit;o(7),v(" ",n.class_display_name," ")}}function F(a,r){if(a&1&&(e(0,"div",48)(1,"div",85)(2,"div",86)(3,"div",87),d(),e(4,"svg",88),l(5,"path",53),t()(),s(),e(6,"div")(7,"h4",54),i(8),t(),e(9,"p",55),i(10),t()()(),e(11,"div",5)(12,"span",89),d(),e(13,"svg",90),l(14,"path",91),t(),i(15," Confirmed "),t()()(),s(),e(16,"div",56)(17,"div",57)(18,"div",14),d(),e(19,"svg",58),l(20,"path",59),t(),s(),e(21,"span",16),i(22,"Registration Number:"),t()(),e(23,"p",60),i(24),t()(),e(25,"div",57)(26,"div",14),d(),e(27,"svg",58),l(28,"path",61),t(),s(),e(29,"span",16),i(30,"Phone:"),t()(),e(31,"p",60),i(32),t()()(),x(33,O,8,1,"div",62),e(34,"div",92)(35,"div",14),d(),e(36,"svg",64),l(37,"path",65),t(),s(),e(38,"span"),i(39),t()(),e(40,"div",14),d(),e(41,"svg",64),l(42,"path",93),t(),s(),e(43,"span"),i(44),t()()()()),a&2){let n=r.$implicit,m=c(3);o(8),g(n.full_name),o(2),g(n.email),o(14),g(n.registration_number),o(8),g(n.phone_number),o(),p("ngIf",n.class_display_name),o(6),v("Registered: ",n.date_joined_formatted||m.formatDate(n.date_joined)),o(5),v("Last Login: ",n.last_login_formatted)}}function N(a,r){if(a&1&&(e(0,"div",84),x(1,F,45,7,"div",47),t()),a&2){let n=c(2);o(),p("ngForOf",n.confirmedRegistrations)}}function B(a,r){if(a&1&&(e(0,"div"),x(1,P,8,0,"div",38)(2,N,2,1,"div",82),t()),a&2){let n=c();o(),p("ngIf",n.confirmedRegistrations.length===0),o(),p("ngIf",n.confirmedRegistrations.length>0)}}var j=class a{constructor(r,n){this.authService=r;this.cdr=n}pendingRegistrations=[];confirmedRegistrations=[];isSidebarOpen=!1;activeTab="pending";ngOnInit(){this.loadPendingRegistrations(),this.loadConfirmedRegistrations()}onSidebarToggle(r){this.isSidebarOpen=r}loadPendingRegistrations(){console.log("Loading pending registrations..."),this.authService.getPendingRegistrations().subscribe({next:r=>{console.log("Pending registrations loaded:",r),this.pendingRegistrations=r,this.cdr.detectChanges()},error:r=>{console.error("Error loading pending registrations:",r),console.error("Error details:",r)}})}loadConfirmedRegistrations(){console.log("Loading confirmed registrations..."),this.authService.getConfirmedRegistrations().subscribe({next:r=>{console.log("Confirmed registrations loaded:",r),this.confirmedRegistrations=r,this.cdr.detectChanges()},error:r=>{console.error("Error loading confirmed registrations:",r),console.error("Error details:",r)}})}approveRegistration(r){this.authService.approveUser(r).subscribe({next:()=>{this.loadPendingRegistrations(),this.loadConfirmedRegistrations()},error:n=>{console.error("Error approving user:",n)}})}rejectRegistration(r){this.authService.rejectUser(r).subscribe({next:()=>{this.loadPendingRegistrations(),this.loadConfirmedRegistrations()},error:n=>{console.error("Error rejecting user:",n)}})}formatDate(r){return new Date(r).toLocaleDateString()}static \u0275fac=function(n){return new(n||a)(_(D),_(w))};static \u0275cmp=y({type:a,selectors:[["app-admin"]],decls:117,vars:9,consts:[["pageTitle","Admin Panel","pageSubtitle","University of Nairobi - Manage pending registrations",3,"sidebarToggle","isSidebarOpen"],[1,"mb-8"],[1,"flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-lg","text-gray-600"],[1,"text-right"],[1,"text-sm","text-gray-500","mb-1"],[1,"text-base","font-semibold","text-gray-900"],[1,"bg-white","border","border-gray-200","rounded-3xl","overflow-hidden"],[1,"px-8","py-6","border-b","border-gray-100"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","bg-orange-500","rounded-full"],[1,"text-sm","font-medium","text-gray-700"],[1,"w-2","h-2","bg-green-500","rounded-full"],[1,"flex","space-x-1","bg-gray-100","p-1","rounded-xl"],[1,"flex-1","px-4","py-2","text-sm","font-medium","rounded-lg","transition-colors",3,"click"],[1,"p-8"],[4,"ngIf"],[1,"mt-8","grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"text-2xl"],[1,"bg-gradient-to-br","from-purple-50","to-pink-50","rounded-2xl","p-6","border","border-purple-100"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-700","mb-4"],[1,"flex","items-center","space-x-4","text-sm","text-gray-600"],[1,"flex","items-center"],[1,"mr-2"],[1,"ml-6"],["routerLink","/admin/class-rep-management",1,"inline-flex","items-center","px-6","py-3","bg-purple-600","text-white","font-medium","rounded-xl","hover:bg-purple-700","transition-colors"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-gradient-to-br","from-blue-50","to-indigo-50","rounded-2xl","p-6","border","border-blue-100"],["routerLink","/admin/course-management",1,"inline-flex","items-center","px-6","py-3","bg-blue-600","text-white","font-medium","rounded-xl","hover:bg-blue-700","transition-colors"],["class","text-center py-16",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"text-center","py-16"],[1,"w-20","h-20","bg-gray-50","rounded-3xl","flex","items-center","justify-center","mx-auto","mb-6"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-xl","font-semibold","text-gray-900","mb-3"],[1,"text-gray-600","max-w-md","mx-auto"],[1,"space-y-6"],["class","bg-gray-50 border border-gray-200 rounded-2xl p-6 hover:bg-gray-100 transition-colors",4,"ngFor","ngForOf"],[1,"bg-gray-50","border","border-gray-200","rounded-2xl","p-6","hover:bg-gray-100","transition-colors"],[1,"flex","items-start","justify-between","mb-6"],[1,"flex","items-center","space-x-3","mb-3"],[1,"w-12","h-12","bg-gray-200","rounded-2xl","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"space-y-2"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"text-sm","text-gray-900","ml-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["class","mb-4",4,"ngIf"],[1,"flex","items-center","space-x-2","text-xs","text-gray-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-blue-50","border","border-blue-200","rounded-2xl","p-4","mb-6"],[1,"flex","items-center","space-x-2","mb-3"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-semibold","text-blue-800"],[1,"text-sm","text-blue-700"],[1,"flex","flex-col","sm:flex-row","gap-3"],[1,"flex-1","bg-green-600","hover:bg-green-700","text-white","px-6","py-3","rounded-xl","text-sm","font-medium","transition-colors","flex","items-center","justify-center","space-x-2",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"flex-1","bg-red-600","hover:bg-red-700","text-white","px-6","py-3","rounded-xl","text-sm","font-medium","transition-colors","flex","items-center","justify-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-4"],[1,"flex","items-center","space-x-2","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"inline-flex","items-center","px-3","py-1","rounded-xl","text-sm","font-medium","bg-gray-200","text-gray-800","ml-6"],["class","space-y-4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"space-y-4"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","space-x-3"],[1,"w-12","h-12","bg-green-100","rounded-2xl","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-600"],[1,"inline-flex","items-center","px-3","py-1","rounded-xl","text-sm","font-medium","bg-green-100","text-green-800"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"]],template:function(n,m){n&1&&(e(0,"app-page-layout",0),f("sidebarToggle",function(S){return m.onSidebarToggle(S)}),e(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),i(5,"Admin Panel"),t(),e(6,"p",4),i(7,"Manage student registrations and approvals"),t()(),e(8,"div",5)(9,"div",6),i(10,"Logged in as"),t(),e(11,"div",7),i(12,"admin@uon.ac.ke"),t()()()(),e(13,"div",8)(14,"div",9)(15,"div",10)(16,"div")(17,"h2",11),i(18,"Student Registrations"),t(),e(19,"p",12),i(20,"Manage student registration requests and view confirmed students"),t()(),e(21,"div",13)(22,"div",14),l(23,"div",15),e(24,"span",16),i(25),t()(),e(26,"div",14),l(27,"div",17),e(28,"span",16),i(29),t()()()(),e(30,"div",18)(31,"button",19),f("click",function(){return m.activeTab="pending"}),i(32," Pending Registrations "),t(),e(33,"button",19),f("click",function(){return m.activeTab="confirmed"}),i(34," Confirmed Students "),t()()(),e(35,"div",20),x(36,z,3,2,"div",21)(37,B,3,2,"div",21),t()(),e(38,"div",22)(39,"div",8)(40,"div",9)(41,"div",2)(42,"div")(43,"h2",11),i(44,"Class Representatives"),t(),e(45,"p",12),i(46,"Assign and manage Class Representatives"),t()(),e(47,"div",23),i(48,"\u{1F465}"),t()()(),e(49,"div",20)(50,"div",24)(51,"div",25)(52,"div",26)(53,"h3",27),i(54,"Manage Class Reps"),t(),e(55,"p",28),i(56," Assign students as Class Representatives with specific permissions for announcements, polls, and message moderation. "),t(),e(57,"div",29)(58,"div",30)(59,"span",31),i(60,"\u{1F4E2}"),t(),e(61,"span"),i(62,"Send Announcements"),t()(),e(63,"div",30)(64,"span",31),i(65,"\u{1F4CA}"),t(),e(66,"span"),i(67,"Create Polls"),t()(),e(68,"div",30)(69,"span",31),i(70,"\u{1F6E1}\uFE0F"),t(),e(71,"span"),i(72,"Moderate Messages"),t()()()(),e(73,"div",32)(74,"a",33),d(),e(75,"svg",34),l(76,"path",35),t(),i(77," Manage Class Reps "),t()()()()()(),s(),e(78,"div",8)(79,"div",9)(80,"div",2)(81,"div")(82,"h2",11),i(83,"Course Management"),t(),e(84,"p",12),i(85,"Manage recordings and materials for your courses"),t()(),e(86,"div",23),i(87,"\u{1F393}"),t()()(),e(88,"div",20)(89,"div",36)(90,"div",25)(91,"div",26)(92,"h3",27),i(93,"Manage Course Content"),t(),e(94,"p",28),i(95," Upload recordings from Zoom, Google Meet, or other platforms. Add course materials organized by topics or specific lessons. "),t(),e(96,"div",29)(97,"div",30)(98,"span",31),i(99,"\u{1F3A5}"),t(),e(100,"span"),i(101,"Upload Recordings"),t()(),e(102,"div",30)(103,"span",31),i(104,"\u{1F4DA}"),t(),e(105,"span"),i(106,"Add Materials"),t()(),e(107,"div",30)(108,"span",31),i(109,"\u{1F4D6}"),t(),e(110,"span"),i(111,"Organize by Topics"),t()()()(),e(112,"div",32)(113,"a",37),d(),e(114,"svg",34),l(115,"path",35),t(),i(116," Manage Courses "),t()()()()()()()()),n&2&&(p("isSidebarOpen",m.isSidebarOpen),o(25),v("",m.pendingRegistrations.length," pending"),o(4),v("",m.confirmedRegistrations.length," confirmed"),o(2),E(m.activeTab==="pending"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),o(2),E(m.activeTab==="confirmed"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),o(3),p("ngIf",m.activeTab==="pending"),o(),p("ngIf",m.activeTab==="confirmed"))},dependencies:[T,M,k,A,R,I],encapsulation:2})};export{j as AdminComponent};
