import{c as B,f as P,i as H,j as G,k as R,q as U}from"./chunk-DHWRSAE3.js";import{a as z}from"./chunk-CJME7ZFP.js";import{a as W}from"./chunk-R3RPSZJZ.js";import{b as D}from"./chunk-E25IYVGI.js";import{Ba as F,E as S,Fa as V,G as a,Ga as N,I as v,Ia as k,J as _,Ja as A,N as c,U as l,V as e,W as i,X as s,Y as C,Z as b,_ as h,fa as M,ia as o,ja as p,ka as w,na as E,oa as j,pa as I,ra as T,u as x,v as y,va as L,w as g,x as f,xa as O}from"./chunk-X3WSSSVM.js";var q=()=>[1,2,3];function J(n,r){if(n&1&&(e(0,"div",14)(1,"div",15)(2,"div",16),s(3,"div",17),e(4,"div",18),s(5,"div",19),i()(),s(6,"div",20)(7,"div",21),e(8,"div",22),s(9,"div",23)(10,"div",24),i()()()),n&2){let t=r.$implicit;M("animation-delay",(t-1)*.1+"s")}}function K(n,r){n&1&&(e(0,"div",3)(1,"div",4)(2,"div",5),g(),e(3,"svg",6),s(4,"path",7),i()(),f(),s(5,"div",8),i(),e(6,"div",9)(7,"h3",10),o(8,"Loading Materials"),i(),e(9,"p",11),o(10,"Fetching your course documents..."),i(),e(11,"div",12),c(12,J,11,2,"div",13),i()()()),n&2&&(a(12),l("ngForOf",T(1,q)))}function Q(n,r){if(n&1&&(e(0,"option",33),o(1),i()),n&2){let t=r.$implicit;l("value",t),a(),p(t)}}function X(n,r){if(n&1&&(e(0,"div",34)(1,"div",15)(2,"div",16)(3,"div",35)(4,"div",36),g(),e(5,"svg",37),s(6,"path",7),i()()(),f(),e(7,"div",18)(8,"span",38),o(9),i()()(),e(10,"h3",10),o(11),i(),e(12,"p",39),o(13),i(),e(14,"div",22)(15,"div",11)(16,"span",40),o(17),i(),e(18,"span",41),o(19,"\u2022"),i(),e(20,"span"),o(21),L(22,"date"),i()(),e(23,"a",42),o(24," View "),i()()()()),n&2){let t=r.$implicit;a(9),w(" ",t.file_type.toUpperCase()," "),a(2),p(t.title),a(2),p(t.description),a(4),p(t.uploaded_by_name),a(4),p(O(22,6,t.created_at,"MMM d, y")),a(2),l("href",t.file_url,S)}}function Y(n,r){n&1&&(e(0,"div",43),g(),e(1,"svg",44),s(2,"path",7),i(),f(),e(3,"h3",45),o(4,"No materials found"),i(),e(5,"p",46),o(6,"Course materials will appear here once they are uploaded."),i()())}function Z(n,r){if(n&1){let t=C();e(0,"div")(1,"div",25)(2,"label",26),o(3," Filter by Subject "),i(),e(4,"select",27),I("ngModelChange",function(m){x(t);let u=h();return j(u.selectedSubject,m)||(u.selectedSubject=m),y(m)}),b("change",function(){x(t);let m=h();return y(m.filterMaterials())}),e(5,"option",28),o(6,"All Subjects"),i(),c(7,Q,2,2,"option",29),i()(),e(8,"div",30),c(9,X,25,9,"div",31),i(),c(10,Y,7,0,"div",32),i()}if(n&2){let t=h();a(4),E("ngModel",t.selectedSubject),a(3),l("ngForOf",t.subjects),a(2),l("ngForOf",t.filteredMaterials),a(),l("ngIf",t.filteredMaterials.length===0&&!t.isLoading)}}var $=class n{constructor(r,t,d){this.courseService=r;this.authService=t;this.cdr=d}materials=[];filteredMaterials=[];subjects=[];selectedSubject="";isLoading=!0;isSidebarOpen=!1;ngOnInit(){this.authService.isAuthenticated()?this.loadMaterials():this.isLoading=!1}onSidebarToggle(r){this.isSidebarOpen=r}loadMaterials(){this.isLoading=!0,this.courseService.getMaterials().subscribe({next:r=>{this.materials=r,this.filteredMaterials=r,this.subjects=["All Courses"],this.isLoading=!1,this.cdr.detectChanges()},error:()=>{this.isLoading=!1,this.cdr.detectChanges()}})}filterMaterials(){this.selectedSubject&&this.selectedSubject!=="All Courses"?this.filteredMaterials=this.materials.filter(r=>r.title.toLowerCase().includes(this.selectedSubject.toLowerCase())):this.filteredMaterials=this.materials}static \u0275fac=function(t){return new(t||n)(v(z),v(D),v(F))};static \u0275cmp=_({type:n,selectors:[["app-materials"]],decls:3,vars:3,consts:[["pageTitle","Course Materials","pageSubtitle","University of Nairobi - Access your course documents and resources",3,"sidebarToggle","isSidebarOpen"],["class","flex flex-col items-center justify-center py-20",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"relative"],[1,"w-16","h-16","bg-primary-100","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-primary-600","animate-pulse"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"absolute","-inset-2","w-20","h-20","border-2","border-primary-200","border-t-primary-600","rounded-full","animate-spin"],[1,"mt-6","text-center"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"mt-8","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","w-full"],["class","bg-white rounded-lg shadow-md animate-pulse",3,"animation-delay",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","animate-pulse"],[1,"p-6"],[1,"flex","items-center","mb-4"],[1,"h-10","w-10","bg-gray-200","rounded-lg"],[1,"ml-3"],[1,"h-6","w-16","bg-gray-200","rounded-full"],[1,"h-6","bg-gray-200","rounded","mb-2"],[1,"h-4","bg-gray-200","rounded","mb-3","w-3/4"],[1,"flex","items-center","justify-between"],[1,"h-4","bg-gray-200","rounded","w-1/2"],[1,"h-8","w-16","bg-gray-200","rounded"],[1,"mb-6"],["for","subject-filter",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","subject-filter",1,"block","w-full","max-w-xs","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","sm:text-sm",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200",4,"ngFor","ngForOf"],["class","text-center py-12",4,"ngIf"],[3,"value"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","duration-200"],[1,"flex-shrink-0"],[1,"h-10","w-10","bg-primary-100","rounded-lg","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-primary-600"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-primary-100","text-primary-800"],[1,"text-sm","text-gray-600","mb-3"],[1,"font-medium"],[1,"mx-2"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","text-sm","leading-4","font-medium","rounded-md","text-primary-700","bg-primary-100","hover:bg-primary-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500",3,"href"],[1,"text-center","py-12"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"]],template:function(t,d){t&1&&(e(0,"app-page-layout",0),b("sidebarToggle",function(u){return d.onSidebarToggle(u)}),c(1,K,13,2,"div",1)(2,Z,11,4,"div",2),i()),t&2&&(l("isSidebarOpen",d.isSidebarOpen),a(),l("ngIf",d.isLoading),a(),l("ngIf",!d.isLoading))},dependencies:[A,V,N,U,G,R,H,B,P,W,k],encapsulation:2})};export{$ as MaterialsComponent};
