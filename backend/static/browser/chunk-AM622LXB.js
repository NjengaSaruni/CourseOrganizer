import{b as R,c as T,d as z,e as P,f as F,g as W,n as B,q as O}from"./chunk-DHWRSAE3.js";import{b as N}from"./chunk-E25IYVGI.js";import{Ba as I,G as a,Ga as V,I as u,J as S,Ja as k,N as f,Ra as j,Sa as A,U as s,V as e,W as t,Wa as D,X as c,Y as C,Z as _,_ as L,ea as M,ia as r,ja as E,na as y,oa as x,pa as b,u as g,v as p,w as h,x as w}from"./chunk-X3WSSSVM.js";function G(o,i){o&1&&(e(0,"div",27)(1,"div",28),c(2,"div",29)(3,"div",30)(4,"div",31),t()())}function H(o,i){if(o&1&&(e(0,"div",32)(1,"div",33)(2,"div",34),h(),e(3,"svg",35),c(4,"path",36),t()(),w(),e(5,"div",37)(6,"p",38),r(7),t()()()()),o&2){let d=L();a(7),E(d.errorMessage)}}function U(o,i){o&1&&(e(0,"span"),r(1,"Sign in"),t())}function J(o,i){o&1&&(e(0,"span",39),h(),e(1,"svg",40),c(2,"circle",41)(3,"path",42),t(),r(4," Signing in... "),t())}var q=class o{constructor(i,d,n){this.authService=i;this.router=d;this.cdr=n}email="";password="";isLoading=!1;errorMessage="";ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/dashboard"])}onSubmit(){if(!this.email||!this.password){this.errorMessage="Please enter both email and password",this.cdr.detectChanges();return}this.isLoading=!0,this.errorMessage="",this.cdr.detectChanges(),this.authService.login(this.email,this.password).subscribe({next:i=>{this.isLoading=!1,this.cdr.detectChanges(),i?this.router.navigate(["/dashboard"]):(this.errorMessage="Login failed. Please check your credentials and try again.",this.cdr.detectChanges())},error:i=>{this.isLoading=!1,this.cdr.detectChanges(),i.error&&i.error.non_field_errors?this.errorMessage=i.error.non_field_errors[0]:i.error&&i.error.email?this.errorMessage=i.error.email[0]:i.error&&i.error.password?this.errorMessage=i.error.password[0]:this.errorMessage="An error occurred. Please try again.",this.cdr.detectChanges()}})}static \u0275fac=function(d){return new(d||o)(u(N),u(j),u(I))};static \u0275cmp=S({type:o,selectors:[["app-login"]],decls:47,vars:9,consts:[["loginForm","ngForm"],[1,"min-h-screen","flex","items-center","justify-center","bg-white","py-12","px-6"],[1,"max-w-md","w-full","space-y-8"],[1,"flex","justify-center","mb-6"],["src","/courseorganizerlogo.png","alt","Course Organizer Logo",1,"h-12","w-auto"],[1,"text-center","text-3xl","font-semibold","text-gray-900","mb-2"],[1,"text-center","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit"],[1,"space-y-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","email","name","email","type","email","autocomplete","email","required","","placeholder","Enter your email",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-gray-900","focus:border-transparent","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","disabled","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","name","password","type","password","autocomplete","current-password","required","","placeholder","Enter your password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-gray-900","focus:border-transparent","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","disabled","ngModel"],["class","flex items-center justify-center mt-3",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-xl p-4",4,"ngIf"],[1,"bg-gray-50","border","border-gray-200","rounded-xl","p-6"],[1,"text-center"],[1,"text-sm","font-semibold","text-gray-900","mb-3"],[1,"space-y-2","text-sm","text-gray-600"],[1,"font-medium"],["type","submit",1,"w-full","bg-gray-900","hover:bg-gray-800","text-white","py-3","px-4","rounded-xl","font-semibold","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center justify-center",4,"ngIf"],[1,"text-center","space-y-3"],[1,"text-sm","text-gray-600"],["routerLink","/register",1,"font-medium","text-gray-900","hover:text-gray-700"],["routerLink","/",1,"font-medium","text-gray-900","hover:text-gray-700"],[1,"flex","items-center","justify-center","mt-3"],[1,"flex","items-center","space-x-2","text-gray-500"],[1,"w-2","h-2","bg-gray-400","rounded-full","animate-bounce"],[1,"w-2","h-2","bg-gray-400","rounded-full","animate-bounce",2,"animation-delay","0.1s"],[1,"w-2","h-2","bg-gray-400","rounded-full","animate-bounce",2,"animation-delay","0.2s"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-4"],[1,"flex"],[1,"flex-shrink-0"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(d,n){if(d&1){let m=C();e(0,"div",1)(1,"div",2)(2,"div")(3,"div",3),c(4,"img",4),t(),e(5,"h2",5),r(6," Sign in to Course Organizer "),t(),e(7,"p",6),r(8," University of Nairobi - Access your course materials and schedule "),t()(),e(9,"form",7,0),_("ngSubmit",function(){return g(m),p(n.onSubmit())}),e(11,"div",8)(12,"div")(13,"label",9),r(14,"Email address"),t(),e(15,"input",10),b("ngModelChange",function(l){return g(m),x(n.email,l)||(n.email=l),p(l)}),t()(),e(16,"div")(17,"label",11),r(18,"Password"),t(),e(19,"input",12),b("ngModelChange",function(l){return g(m),x(n.password,l)||(n.password=l),p(l)}),t(),f(20,G,5,0,"div",13),t()(),f(21,H,8,1,"div",14),e(22,"div",15)(23,"div",16)(24,"h3",17),r(25," Demo Account Available "),t(),e(26,"div",18)(27,"p")(28,"span",19),r(29,"Demo Student (Class of 2029):"),t(),r(30," demo.student@uon.ac.ke / demo123"),t(),e(31,"p")(32,"span",19),r(33,"Student:"),t(),r(34," john.doe@student.uon.ac.ke / student123"),t()()()(),e(35,"div")(36,"button",20),f(37,U,2,0,"span",21)(38,J,5,0,"span",22),t()(),e(39,"div",23)(40,"p",24),r(41," Don't have an account? "),e(42,"a",25),r(43," Register here "),t()(),e(44,"p",24)(45,"a",26),r(46," \u2190 Back to Home "),t()()()()()()}if(d&2){let m=M(10);a(15),s("disabled",n.isLoading),y("ngModel",n.email),a(4),s("disabled",n.isLoading),y("ngModel",n.password),a(),s("ngIf",n.isLoading),a(),s("ngIf",n.errorMessage),a(15),s("disabled",n.isLoading||!m.form.valid),a(),s("ngIf",!n.isLoading),a(),s("ngIf",n.isLoading)}},dependencies:[k,V,O,W,R,T,z,B,F,P,D,A],encapsulation:2})};export{q as LoginComponent};
