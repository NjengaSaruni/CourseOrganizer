import{a as p}from"./chunk-E25IYVGI.js";import{Ma as u,h as t,j as i,l as r,p as l,s as m}from"./chunk-X3WSSSVM.js";var c=class o{constructor(e){this.http=e}apiUrl=p.apiUrl;getClassReps(){return this.http.get(`${this.apiUrl}/communication/class-reps/`).pipe(i(e=>e),r(e=>(console.error("Error fetching class reps:",e),t(()=>e))))}createClassRep(e){return this.http.post(`${this.apiUrl}/communication/class-reps/`,e).pipe(i(s=>s),r(s=>(console.error("Error creating class rep:",s),t(()=>s))))}updateClassRep(e,s){return this.http.put(`${this.apiUrl}/communication/class-reps/${e}/`,s).pipe(i(n=>n),r(n=>(console.error("Error updating class rep:",n),t(()=>n))))}deleteClassRep(e){return this.http.delete(`${this.apiUrl}/communication/class-reps/${e}/`).pipe(i(s=>s),r(s=>(console.error("Error deleting class rep:",s),t(()=>s))))}updateClassRepPermissions(e,s){let n={permissions:s};return this.http.post(`${this.apiUrl}/communication/class-reps/${e}/update-permissions/`,n).pipe(i(a=>a),r(a=>(console.error("Error updating class rep permissions:",a),t(()=>a))))}getClassRepPermissions(e){return this.http.get(`${this.apiUrl}/communication/class-reps/${e}/permissions/`).pipe(i(s=>s),r(s=>(console.error("Error fetching class rep permissions:",s),t(()=>s))))}getStudents(e){let s={};return e&&(s.status=e),this.http.get(`${this.apiUrl}/directory/students/`,{params:s}).pipe(i(n=>Array.isArray(n)?n:n&&Array.isArray(n.results)?n.results:n&&Array.isArray(n.data)?n.data:[]),r(n=>(console.error("Error fetching students:",n),t(()=>n))))}getStudentsByClass(e){return this.http.get(`${this.apiUrl}/directory/students/?class_id=${e}`).pipe(i(s=>s),r(s=>(console.error("Error fetching students by class:",s),t(()=>s))))}getClasses(){return this.http.get(`${this.apiUrl}/school/classes/`).pipe(i(e=>Array.isArray(e)?e:e&&Array.isArray(e.results)?e.results:e&&Array.isArray(e.data)?e.data:[]),r(e=>(console.error("Error fetching classes:",e),t(()=>e))))}getDefaultClass(){return this.http.get(`${this.apiUrl}/school/classes/default/`).pipe(i(e=>e),r(e=>(console.error("Error fetching default class:",e),t(()=>e))))}getCommunicationStats(){return this.http.get(`${this.apiUrl}/communication/stats/`).pipe(i(e=>e),r(e=>(console.error("Error fetching communication stats:",e),t(()=>e))))}getAvailablePermissions(){return["send_announcements","moderate_messages","view_all_messages","manage_polls","send_notifications"]}getPermissionDisplayName(e){return{send_announcements:"Send Announcements",moderate_messages:"Moderate Messages",view_all_messages:"View All Messages",manage_polls:"Manage Polls",send_notifications:"Send Notifications"}[e]||e}getPermissionDescription(e){return{send_announcements:"Can send official announcements to the class",moderate_messages:"Can moderate and delete inappropriate messages",view_all_messages:"Can view private messages between students",manage_polls:"Can create and manage polls for class decisions",send_notifications:"Can send push notifications to class members"}[e]||"No description available"}getAnnouncements(){return this.http.get(`${this.apiUrl}/communication/announcements/`).pipe(i(e=>e),r(e=>(console.error("Error fetching announcements:",e),t(()=>e))))}createAnnouncement(e){return this.http.post(`${this.apiUrl}/communication/announcements/`,e).pipe(i(s=>s),r(s=>(console.error("Error creating announcement:",s),t(()=>s))))}updateAnnouncement(e,s){return this.http.put(`${this.apiUrl}/communication/announcements/${e}/`,s).pipe(r(n=>(console.error("Error updating announcement:",n),t(()=>n))))}deleteAnnouncement(e){return this.http.delete(`${this.apiUrl}/communication/announcements/${e}/`).pipe(r(s=>(console.error("Error deleting announcement:",s),t(()=>s))))}static \u0275fac=function(s){return new(s||o)(m(u))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
