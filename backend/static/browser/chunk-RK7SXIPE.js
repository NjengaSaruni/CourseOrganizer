import{a as L}from"./chunk-7XPDMRMC.js";import{b as P,c as U,d as F,e as N,f as T,g as I,q as W}from"./chunk-DHWRSAE3.js";import{a as k}from"./chunk-R3RPSZJZ.js";import{b as E}from"./chunk-E25IYVGI.js";import{G as a,Ga as M,I as y,J as v,Ja as C,N as x,U as f,V as e,W as r,X as c,Z as _,_ as S,ia as i,ja as u,ka as w,na as d,oa as p,pa as g,w as b,x as h}from"./chunk-X3WSSSVM.js";function A(s,o){s&1&&(b(),e(0,"svg",46),c(1,"circle",47)(2,"path",48),r())}function j(s,o){if(s&1&&(e(0,"div",49)(1,"div",50)(2,"div",51),b(),e(3,"svg",52),c(4,"path",53),r()(),h(),e(5,"div",54)(6,"p",55),i(7),r()()()()),s&2){let l=S();a(7),u(l.successMessage)}}function z(s,o){if(s&1&&(e(0,"div",56)(1,"div",50)(2,"div",51),b(),e(3,"svg",57),c(4,"path",58),r()(),h(),e(5,"div",54)(6,"p",59),i(7),r()()()()),s&2){let l=S();a(7),u(l.errorMessage)}}var B=class s{constructor(o,l){this.authService=o;this.settingsService=l}currentUser=null;isSidebarOpen=!1;isUpdating=!1;successMessage="";errorMessage="";profileForm={first_name:"",last_name:"",email:"",registration_number:"",phone_number:"",class_name:"",program:""};ngOnInit(){this.authService.currentUser$.subscribe(o=>{this.currentUser=o,o&&(this.profileForm={first_name:o.first_name||"",last_name:o.last_name||"",email:o.email||"",registration_number:o.registration_number||"",phone_number:o.phone_number||"",class_name:o.class_display_name||"",program:""})})}getInitials(){return this.currentUser?.full_name?this.currentUser.full_name.split(" ").map(o=>o.charAt(0)).join("").toUpperCase().slice(0,2):"U"}onSidebarToggle(o){this.isSidebarOpen=o}updateProfile(){this.isUpdating=!0,this.successMessage="",this.errorMessage="";let o={first_name:this.profileForm.first_name,last_name:this.profileForm.last_name,phone_number:this.profileForm.phone_number};this.settingsService.updateProfile(o).subscribe({next:l=>{this.isUpdating=!1,this.successMessage="Profile updated successfully!",this.currentUser&&(this.currentUser.first_name=l.first_name,this.currentUser.last_name=l.last_name,this.currentUser.full_name=l.full_name,this.currentUser.phone_number=l.phone_number||""),setTimeout(()=>{this.successMessage=""},3e3)},error:l=>{this.isUpdating=!1,this.errorMessage=l.error?.message||"Failed to update profile. Please try again.",setTimeout(()=>{this.errorMessage=""},5e3)}})}resetForm(){this.currentUser&&(this.profileForm={first_name:this.currentUser.first_name||"",last_name:this.currentUser.last_name||"",email:this.currentUser.email||"",registration_number:this.currentUser.registration_number||"",phone_number:this.currentUser.phone_number||"",class_name:this.currentUser.class_display_name||"",program:""}),this.successMessage="",this.errorMessage=""}static \u0275fac=function(l){return new(l||s)(y(E),y(L))};static \u0275cmp=v({type:s,selectors:[["app-profile-settings"]],decls:77,vars:17,consts:[["pageTitle","Profile Settings","pageSubtitle","Manage your personal information and profile details",3,"sidebarToggle","isSidebarOpen"],[1,"max-w-4xl","mx-auto","space-y-8"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-gray-200","p-8"],[1,"flex","items-center","space-x-6"],[1,"relative"],[1,"w-24","h-24","bg-gradient-to-br","from-gray-400","to-gray-600","rounded-2xl","flex","items-center","justify-center","shadow-lg"],[1,"text-white","font-bold","text-2xl"],[1,"absolute","-bottom-2","-right-2","w-8","h-8","bg-white","rounded-full","shadow-md","border-2","border-gray-200","flex","items-center","justify-center","hover:bg-gray-50","transition-colors"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","mb-1"],[1,"text-sm","text-gray-500"],[1,"mt-3"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","bg-green-100","text-green-800"],[1,"w-2","h-2","bg-green-400","rounded-full","mr-2"],[1,"mb-6"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","firstName","name","firstName","placeholder","Enter your first name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","lastName","name","lastName","placeholder","Enter your last name",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","email","id","email","name","email","placeholder","Enter your email",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],["for","registrationNumber",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","registrationNumber","name","registrationNumber","placeholder","Enter your registration number","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],[1,"mt-1","text-sm","text-gray-500"],["for","phoneNumber",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","Enter your phone number",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],[1,"border-t","border-gray-200","pt-6"],[1,"text-lg","font-medium","text-gray-900","mb-4"],["for","class",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","class","name","class","placeholder","e.g., Class of 2029","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],["for","program",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","program","name","program","placeholder","e.g., Bachelor of Laws","readonly","",1,"w-full","px-4","py-3","border","border-gray-300","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","space-x-4","pt-6","border-t","border-gray-200"],["type","button",1,"px-6","py-3","border","border-gray-300","rounded-xl","text-gray-700","hover:bg-gray-50","transition-colors","font-medium",3,"click"],["type","submit",1,"px-6","py-3","bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","text-white","rounded-xl","transition-colors","font-medium","flex","items-center",3,"disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","bg-green-50 border border-green-200 rounded-xl p-4",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-xl p-4",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-green-50","border","border-green-200","rounded-xl","p-4"],[1,"flex"],[1,"flex-shrink-0"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-green-800"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-4"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","font-medium","text-red-800"]],template:function(l,t){l&1&&(e(0,"app-page-layout",0),_("sidebarToggle",function(n){return t.onSidebarToggle(n)}),e(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),i(7),r()(),e(8,"button",7),b(),e(9,"svg",8),c(10,"path",9)(11,"path",10),r()()(),h(),e(12,"div",11)(13,"h2",12),i(14),r(),e(15,"p",13),i(16),r(),e(17,"p",14),i(18),r(),e(19,"div",15)(20,"span",16),c(21,"div",17),i(22," Active Student "),r()()()()(),e(23,"div",2)(24,"div",18)(25,"h3",19),i(26,"Personal Information"),r(),e(27,"p",20),i(28,"Update your personal details and contact information."),r()(),e(29,"form",21),_("ngSubmit",function(){return t.updateProfile()}),e(30,"div",22)(31,"div")(32,"label",23),i(33," First Name "),r(),e(34,"input",24),g("ngModelChange",function(n){return p(t.profileForm.first_name,n)||(t.profileForm.first_name=n),n}),r()(),e(35,"div")(36,"label",25),i(37," Last Name "),r(),e(38,"input",26),g("ngModelChange",function(n){return p(t.profileForm.last_name,n)||(t.profileForm.last_name=n),n}),r()(),e(39,"div")(40,"label",27),i(41," Email Address "),r(),e(42,"input",28),g("ngModelChange",function(n){return p(t.profileForm.email,n)||(t.profileForm.email=n),n}),r()(),e(43,"div")(44,"label",29),i(45," Registration Number "),r(),e(46,"input",30),g("ngModelChange",function(n){return p(t.profileForm.registration_number,n)||(t.profileForm.registration_number=n),n}),r(),e(47,"p",31),i(48,"Registration number cannot be changed"),r()(),e(49,"div")(50,"label",32),i(51," Phone Number "),r(),e(52,"input",33),g("ngModelChange",function(n){return p(t.profileForm.phone_number,n)||(t.profileForm.phone_number=n),n}),r()()(),e(53,"div",34)(54,"h4",35),i(55,"Academic Information"),r(),e(56,"div",22)(57,"div")(58,"label",36),i(59," Class "),r(),e(60,"input",37),g("ngModelChange",function(n){return p(t.profileForm.class_name,n)||(t.profileForm.class_name=n),n}),r(),e(61,"p",31),i(62,"Class assignment is managed by administrators"),r()(),e(63,"div")(64,"label",38),i(65," Program "),r(),e(66,"input",39),g("ngModelChange",function(n){return p(t.profileForm.program,n)||(t.profileForm.program=n),n}),r(),e(67,"p",31),i(68,"Program assignment is managed by administrators"),r()()()(),e(69,"div",40)(70,"button",41),_("click",function(){return t.resetForm()}),i(71," Cancel "),r(),e(72,"button",42),x(73,A,3,0,"svg",43),i(74),r()()()(),x(75,j,8,1,"div",44)(76,z,8,1,"div",45),r()()),l&2&&(f("isSidebarOpen",t.isSidebarOpen),a(7),u(t.getInitials()),a(7),u(t.currentUser==null?null:t.currentUser.full_name),a(2),u(t.currentUser==null?null:t.currentUser.email),a(2),u(t.currentUser==null?null:t.currentUser.registration_number),a(16),d("ngModel",t.profileForm.first_name),a(4),d("ngModel",t.profileForm.last_name),a(4),d("ngModel",t.profileForm.email),a(4),d("ngModel",t.profileForm.registration_number),a(6),d("ngModel",t.profileForm.phone_number),a(8),d("ngModel",t.profileForm.class_name),a(6),d("ngModel",t.profileForm.program),a(6),f("disabled",t.isUpdating),a(),f("ngIf",t.isUpdating),a(),w(" ",t.isUpdating?"Updating...":"Update Profile"," "),a(),f("ngIf",t.successMessage),a(),f("ngIf",t.errorMessage))},dependencies:[C,M,W,I,P,U,F,T,N,k],encapsulation:2})};export{B as ProfileSettingsComponent};
